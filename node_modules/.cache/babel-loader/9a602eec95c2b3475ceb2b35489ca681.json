{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/gc159/Desktop/nwitter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/gc159/Desktop/nwitter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\gc159\\\\Desktop\\\\nwitter\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import{dbService,storageService}from\"myFirebase\";import{doc,deleteDoc,updateDoc}from\"firebase/firestore\";import{deleteObject,ref}from\"firebase/storage\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faTrash,faPencilAlt}from\"@fortawesome/free-solid-svg-icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Nweet=function Nweet(_ref){var nweetObj=_ref.nweetObj,isOwner=_ref.isOwner;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useState3=useState(nweetObj.text),_useState4=_slicedToArray(_useState3,2),newNweet=_useState4[0],setNweNweet=_useState4[1];var onDeleteClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var ok,NweetTextRef,urlRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ok=window.confirm(\"Are you sure you want to delete this nweet?\");console.log(ok);if(!ok){_context.next=9;break;}NweetTextRef=doc(dbService,\"nweets\",\"\".concat(nweetObj.id));// delete nweet\n_context.next=6;return deleteDoc(NweetTextRef);case 6:urlRef=ref(storageService,nweetObj.attachmentURL);// delete file\n_context.next=9;return deleteObject(urlRef);case 9:case\"end\":return _context.stop();}}},_callee);}));return function onDeleteClick(){return _ref2.apply(this,arguments);};}();var toggleEditing=function toggleEditing(){return setEditing(function(prev){return!prev;});};var onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var NweetTextRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();NweetTextRef=doc(dbService,\"nweets\",\"\".concat(nweetObj.id));_context2.next=4;return updateDoc(NweetTextRef,{text:newNweet});case 4:setEditing(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref3.apply(this,arguments);};}();var onChange=function onChange(event){var value=event.target.value;setNweNweet(value);};return/*#__PURE__*/_jsx(\"div\",{className:\"nweet\",children:editing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"container nweetEdit\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newNweet,onChange:onChange,required:true,autoFocus:true,className:\"formInput\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update Nweet\",className:\"formBtn\"})]}),/*#__PURE__*/_jsx(\"span\",{onClick:toggleEditing,className:\"formBtn cancelBtn\",children:\"Cencel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:nweetObj.text}),nweetObj.attachmentURL&&/*#__PURE__*/_jsx(\"img\",{src:nweetObj.attachmentURL}),isOwner&&/*#__PURE__*/_jsxs(\"div\",{className:\"nweet__actions\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:onDeleteClick,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash})}),/*#__PURE__*/_jsx(\"span\",{onClick:toggleEditing,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPencilAlt})})]})]})});};export default Nweet;","map":{"version":3,"sources":["C:/Users/gc159/Desktop/nwitter/src/components/Nweet.js"],"names":["React","useState","dbService","storageService","doc","deleteDoc","updateDoc","deleteObject","ref","FontAwesomeIcon","faTrash","faPencilAlt","Nweet","nweetObj","isOwner","editing","setEditing","text","newNweet","setNweNweet","onDeleteClick","ok","window","confirm","console","log","NweetTextRef","id","urlRef","attachmentURL","toggleEditing","prev","onSubmit","event","preventDefault","onChange","value","target"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { dbService, storageService  } from \"myFirebase\";\r\nimport { doc, deleteDoc, updateDoc } from \"firebase/firestore\"\r\nimport { deleteObject, ref } from \"firebase/storage\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTrash, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\"\r\n\r\nconst Nweet = ({ nweetObj, isOwner }) => {\r\n    const [editing, setEditing] = useState(false);\r\n    const [newNweet, setNweNweet] = useState(nweetObj.text);\r\n    const onDeleteClick = async () => {\r\n        const ok = window.confirm(\"Are you sure you want to delete this nweet?\");\r\n        console.log(ok);\r\n        if(ok){\r\n            const NweetTextRef = doc(dbService, \"nweets\", `${nweetObj.id}`);\r\n            // delete nweet\r\n            await deleteDoc(NweetTextRef);\r\n            const urlRef = ref(storageService, nweetObj.attachmentURL)\r\n            // delete file\r\n            await deleteObject(urlRef);\r\n        }\r\n    }\r\n    const toggleEditing = () => setEditing(prev => !prev);\r\n    const onSubmit = async (event) => {\r\n        event.preventDefault();\r\n        const NweetTextRef = doc(dbService, \"nweets\", `${nweetObj.id}`);\r\n        await updateDoc(NweetTextRef,{\r\n            text: newNweet,\r\n        })\r\n        setEditing(false);\r\n    }\r\n    const onChange = (event) => {\r\n        const {target:{value}} = event;\r\n        setNweNweet(value);\r\n    }\r\n    return (\r\n        <div className=\"nweet\">\r\n            {editing ? (\r\n                <>\r\n                    <form onSubmit={onSubmit}\r\n                    className=\"container nweetEdit\">\r\n                        <input type=\"text\" value={newNweet} onChange={onChange} required autoFocus className=\"formInput\"/>\r\n                        <input type=\"submit\" value=\"Update Nweet\" className=\"formBtn\"/>\r\n                    </form>\r\n                    <span onClick={toggleEditing}\r\n                    className=\"formBtn cancelBtn\">Cencel</span>\r\n                </>\r\n                ) : (\r\n                <>\r\n                    <h4>{nweetObj.text}</h4>\r\n                    {nweetObj.attachmentURL && (\r\n                        <img src={nweetObj.attachmentURL}/>\r\n                    )}\r\n                    {isOwner && (\r\n                    <div className=\"nweet__actions\">\r\n                        <span onClick={onDeleteClick}>\r\n                            <FontAwesomeIcon icon={faTrash}/>\r\n                            </span>\r\n                        <span onClick={toggleEditing}>\r\n                            <FontAwesomeIcon icon={faPencilAlt}/>\r\n                            </span>\r\n                    </div>\r\n                    )}\r\n                </>)}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Nweet;"]},"metadata":{},"sourceType":"module"}